# https://docs.spring.io/spring-boot/docs/current/reference/html/common-application-properties.html
spring:
    profiles.active: development

# logging
logging.level:
    net.maritimecloud.identityregistry: DEBUG
#    org.springframework.web: DEBUG
#    org.springframework.security: DEBUG
#    org.keycloak.adapters: DEBUG

# SSL
server:
    port: 8443
    ssl:
        enabled: false
        # Keystore
        # key-store: classpath:keystore.jks
        key-store: mc-it-keystore.jks
        # key-store: /etc/ssl/certs/java/cacerts
        # key-alias: rootcert
        key-store-password: changeit
        key-password: changeit
        # Truststore
        trust-store: mc-truststore.jks
        trust-store-password: changeit
        client-auth: want

# Login info for the central keycloak MC ID broker (Used for ID Providers)
net:
    maritimecloud:
        idreg:
            keycloak-broker-admin-user: idreg-admin
            keycloak-broker-admin-password: idreg-admin
            keycloak-broker-admin-client: security-admin-console
            keycloak-broker-realm: MaritimeCloud
            keycloak-broker-base-url: http://localhost:9080/auth/

            # Login info for the keycloak used for project users
            keycloak-project-users-admin-user: idreg-admin
            keycloak-project-users-admin-password: idreg-admin
            keycloak-project-users-admin-client: security-admin-console
            keycloak-project-users-realm: MaritimeCloud
            keycloak-project-users-base-url: http://localhost:9080/auth/

            auto-approve-organizations: true

            # Certificate setup
            certs:
                root-keystore: mc-root-keystore.jks
                it-keystore: mc-it-keystore.jks
                keystore-password: changeit
                truststore: mc-truststore.jks
                truststore-password: changeit

# Set alternative keycloak conf file
#keycloak.configurationFile: file:/conf/keycloak.json

# Test db-connection before use to avoid connection timeout errors
spring.datasource:
    test-on-borrow: true
    validation-query: SELECT 1

# Do not "leak" internal setup details in http X-Application-Context header
management.add-application-context-header: false
---
spring:
    profiles: development
# Database setup
    datasource:
        url: jdbc:mysql://localhost/identity_registry
        username: idreg
        password: idreg
        driverClassName: com.mysql.jdbc.Driver

---
spring:
    profiles: test
    datasource:
       url: jdbc:h2:mem:test;DB_CLOSE_ON_EXIT=FALSE
       driverClassName: org.h2.Driver
